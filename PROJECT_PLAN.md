# План проекта маркетплейса автозапчастей

## 1. Общее описание
Платформа для онлайн-продажи автозапчастей с упрощенной системой поиска по VIN-коду и функционалом для российского рынка. Поддерживает три роли пользователей: покупатель, продавец и администратор. Основной акцент — на удобный поиск, оформление заказов и модерацию контента.

## 2. Основные роли

### 2.1. Покупатель
**Поиск запчастей:**
- Поиск по VIN-коду (формат: 15 символов, например, TOY2023COROLLAENG):
  - Автоматическое заполнение:
    - Марка автомобиля
    - Модель
    - Год выпуска
    - Тип двигателя
    - Категория запчасти
- Поиск по названию товара.
- Фильтры:
  - Марка
  - Модель
  - Год выпуска
  - Категория запчасти (например, тормоза, двигатель)
  - Состояние (новое/б/у)
  - Цена
  - Наличие
  - Гарантия
- Просмотр деталей товара в модальном окне.

**Оформление заказа:**
- Управление корзиной:
  - Добавление/удаление товаров
  - Изменение количества
  - Отображение итоговой стоимости (товары + доставка)
- Расчет доставки:
  - 100 ₽/кг
  - 15 ₽/км от Москвы (на основе Distance Matrix API)
  - Минимальная стоимость: 1000 ₽
- Способы оплаты:
  - Онлайн-оплата картой (имитация)
  - Наложенный платеж с генерацией QR-кода
- Ввод данных доставки (ФИО, адрес, телефон) с валидацией.

**Дополнительные функции:**
- Просмотр истории заказов с детализацией (товары, статус, дата).
- Отслеживание статуса доставки по номеру отслеживания.

### 2.2. Продавец
**Управление товарами:**
- Добавление/редактирование/удаление товаров:
  - Параметры (название, цена, категория, материал, совместимость и др.)
  - Загрузка до 5 изображений с предпросмотром
- Просмотр списка товаров в виде сетки.

**Управление заказами:**
- Просмотр списка заказов с фильтрацией по статусу (в обработке, отправлено, доставлено).
- Обработка заказов:
  - Изменение статуса заказа
  - Добавление номера отслеживания для статуса "Отправлено"
- Просмотр деталей заказа (товары, покупатель, доставка).

**Управление доставкой:**
- Указание номера отслеживания при отправке заказа.
- Обновление информации о доставке.

**Аналитика продаж:**
- Генерация отчетов в Excel:
  - Список товаров (название, количество продаж, выручка)
  - Динамика продаж по месяцам
  - Популярные категории
  - География заказов
- Формат файла: `report_YYYYMMDD.xlsx`.

### 2.3. Администратор
**Основные функции:**
- **Модерация товаров:**
  - Просмотр списка всех товаров с фильтрами (по категории, статусу, продавцу).
  - Одобрение или отклонение новых/отредактированных товаров.
  - Удаление товаров, нарушающих правила платформы.
  - Редактирование товаров для исправления ошибок (название, цена, изображения и др.).
- **Управление пользователями:**
  - Просмотр списка пользователей с фильтрами (по роли, дате регистрации).
  - Блокировка или разблокировка учетных записей.
  - Сброс пароля пользователей с генерацией временного пароля.
  - Изменение роли пользователя (например, покупатель → продавец).
- **Управление заказами:**
  - Просмотр всех заказов с фильтрами (по статусу, дате, имени покупателя).
  - Изменение статуса заказа (например, в спорных ситуациях).
  - Просмотр деталей заказа (товары, доставка, оплата).
- **Аналитика платформы:**
  - Генерация отчетов в Excel:
    - Экспорт списка пользователей и товаров для анализа.
    - Формат файла: `users_and_products_YYYYMMDD.xlsx`.
    - Общая выручка платформы.
    - Количество заказов по категориям и регионам.
    - Активность пользователей (регистрации, заказы, товары).
    - Популярные товары и продавцы.
    - Формат файла: `admin_report_YYYYMMDD.xlsx`.
- **Настройка платформы:**
  - Изменение минимальной стоимости доставки (по умолчанию 1000 ₽).
  - Настройка коэффициентов доставки (100 ₽/кг, 0.15 ₽/км).
  - Управление текстами интерфейса (сообщения об ошибках, подсказки).

## 3. Техническая реализация

### 3.1. Поиск по VIN-коду
- Ввод 15-значного кода.
- Расшифровка:
  - Первые 3 символа: марка
  - Следующие 4: модель и год
  - Остальные: параметры запчасти
- Пример: `TOY2023COROLLAENG` → Toyota, Corolla 2023, двигатель.

### 3.2. Доставка
- Расчет стоимости:
  - Вес × 100 ₽
  - Расстояние от Москвы × 0.15 ₽/км
  - Минимальная стоимость: 1000 ₽
- Интеграция с Distance Matrix API для расчета расстояния.

### 3.3. Оплата
- Онлайн-оплата картой (имитация).
- Наложенный платеж с QR-кодом для оплаты.

### 3.4. Панель администратора
- Интерфейс с разделами для модерации товаров, управления пользователями, заказами, аналитикой и настройками.
- Фильтрация данных для удобного поиска.
- Экспорт данных в Excel для аналитики.
- Доступ защищен секретным ключом (например, ADMKEY2025).

## 4. Этапы разработки

1. **Базовый функционал**
   - Система товаров и категорий.
   - Авторизация с разделением ролей.

2. **Поиск и фильтрация**
   - Реализация поиска по VIN-коду и названию.
   - Фильтры для товаров.

3. **Система заказов**
   - Корзина и оформление заказа.
   - Управление заказами для продавцов.
   - Отслеживание доставки.

4. **Администрирование**
   - Панель администратора.
   - Модерация товаров.
   - Управление пользователями и заказами.
   - Аналитика и настройки платформы.

## 5. Технологии

**Основные:**
- Frontend: HTML, CSS, JavaScript
- Backend: PHP
- База данных: MySQL

**Интеграции:**
- Платежный симулятор для имитации оплаты.
- Distance Matrix API для расчета доставки.
- SheetJS для экспорта данных в Excel.

## 6. Особенности реализации

1. **Авторизация:**
   - Вход по email или телефону.
   - Разделение ролей (покупатель, продавец, администратор).
   - Восстановление пароля для пользователей через администратора.

2. **Поиск товаров:**
   - Быстрая фильтрация по параметрам.
   - Поиск по VIN-коду с автозаполнением.
   - Поиск по названию для упрощения.

3. **Работа с изображениями:**
   - Загрузка до 5 изображений на товар.
   - Автоматическое сжатие изображений.
   - Предпросмотр перед публикацией.
   - Модерация изображений администратором.

4. **Администрирование:**
   - Удобная фильтрация данных (по статусу, роли, дате).
   - Экспорт данных в Excel для анализа.
   - Настройка параметров доставки и текстов интерфейса.

## 7. Тестирование

**Основные направления:**
1. Проверка поиска (по VIN-коду и названию).
2. Тестирование процесса заказа (корзина, оформление, оплата).
3. Проверка расчета доставки.
4. Тестирование интерфейсов (покупатель, продавец, администратор).
5. Проверка безопасности (авторизация, доступ по ролям).
6. Тестирование модерации (товары, пользователи, заказы).
7. Проверка экспорта данных в Excel.

**Методы тестирования:**
- Ручное тестирование функционала.
- Проверка на тестовых данных.
- Тестирование реальными пользователями.

---

**Примечание:** Система VIN-поиска использует упрощенный алгоритм сопоставления. Панель администратора защищена секретным ключом для обеспечения безопасности.